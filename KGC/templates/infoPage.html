<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="| ê²½ê¸° ë‚˜ì¹¨ë°˜ | KGU Compass |">
    <meta property="og:description" content="ê²½ê¸°ëŒ€í•™êµ ì •ë³´ë¥¼ í•œëˆˆì—!">
    <meta property="og:image" content="">
    <link rel="icon" type="image/png" href="">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>
    <title>| ê²½ê¸° ë‚˜ì¹¨ë°˜ | KGU Compass | ì •ë³´ í˜ì´ì§€ |</title>
</head>
<link rel="stylesheet" href="{{ url_for('static', filename='css/sub.css') }}">
<body>
    <div id="result_title"></div>
    <hr>
    <div id="result_cal" style="display: none;"></div>
    <div id="result_award" style="display: none;"></div>
    <div id="result_course" style="display: none;"></div>
    <div id="result_dorm" style="display: none;"></div>
    <div id="result_commute" style="display: none;"></div>
    <div id="result_depart" style="display: none;"></div>
    <!-- ### -->
    <script>
        // --- //
        loadPlan();
        // --- //
        $(document).ready(function() {
            info_load();
        });
        // --- //
        function info_load() {
            let params = new URLSearchParams(window.location.search);
            let major = params.get("major");
            let info = params.get("info");
            let major_name = "";
            let info_name = "";
            if (major && info) {
                if (major === "computer_major") {
                    major_name = "AIì»´í“¨í„°ê³µí•™ë¶€";
                } else if (major === "free_major") {
                    major_name = "ììœ ì „ê³µí•™ë¶€";
                }
                if (info === "plan") {
                    info_name = "í•™ì‚¬ ì¼ì •";
                    $("#result_cal").show();
                    loadCalendar();
                } else if (info === "award") {
                    info_name = "ì¥í•™ê¸ˆ";
                    $("#result_award").show();
                    loadAward();
                } else if (info === "course") {
                    info_name = "ìˆ˜ê°• ì‹ ì²­";
                    $("#result_course").show();
                    loadCourse();
                } else if (info === "dorm") {
                    info_name = "ê¸°ìˆ™ì‚¬";
                    $("#result_dorm").show();
                    loadDorm();
                } else if (info === "commute") {
                    info_name = "í†µí•™";
                    $("#result_commute").show();
                    loadCommute();
                } else if (info === "depart") {
                    info_name = "í•™ê³¼";
                    $("#result_depart").show();
                    if (major === "free_major") {
                        loadFree();
                    } else if (major === "computer_major") {
                        loadComputer();
                    }
                }
                let temp_html = `
                    <h1>ğŸ“š <strong style="color: navy;">${major_name}</strong>ì˜ <strong style="color: lightskyblue;">${info_name}</strong> ğŸ“‘ <span class="text-primary">ì •ë³´</span></h1>
                `;
                $("#result_title").html(temp_html);
            } else {
                let temp_error_html = `
                    <h1 style="color: red;">âŒ ì˜ëª»ëœ ì ‘ê·¼ì…ë‹ˆë‹¤!!</h1>
                `;
                $("#result_title").html(temp_error_html);
            }
        }
        // --- //
        function loadAward() {
            let temp_html = `
            `;
            $('#result_award').html(temp_html)
        }
        // --- //
        function loadComputer() {
            $.ajax({
                type: "GET",
                url: "/showComputer",
                data: {},
                success: function(response) {
                    console.log(response)
                    let sg_value = response.univ_depart.sg_value;
                    let cg_value = response.univ_depart.cg_value;
                    let temp_html = `
                        <p>${sg_value[0]}</p>
                        <p>${sg_value[1]}</p>
                        <p>${sg_value[2]}</p>
                        <p>${cg_value[1]}</p>
                    `;
                    $('#result_depart').html(temp_html)
                },
                error: function() {
                    console.error('âŒ ì—ëŸ¬');
                }
            })
        }
        // --- //
        function loadFree() {
            $.ajax({
                type: "GET",
                url: "/showFree",
                data: {},
                success: function(response) {
                    console.log(response)
                    let sg_value = response.univ_depart.sg_value;
                    let temp_html = `
                        <p>${sg_value[0]}</p>
                        <p>ê²½ê³„ë¥¼ ë„˜ì–´ ë‹¤ì–‘í•œ ì§€ì‹ê³¼ ì •ë³´ë¥¼ ì—°ê³„í•˜ê³  í†µí•©ì ìœ¼ë¡œ ì‚¬ê³ í•˜ì—¬ ìƒˆë¡­ê³  ì˜ë¯¸ ìˆëŠ” ê°€ì¹˜ë¥¼ ì°½ì¶œí•˜ëŠ” ëŠ¥ë ¥</p>
                        <p>ê¸‰ë³€í•˜ëŠ” ì‚¬íšŒì , ë¬¸í™”ì  í™˜ê²½ ì•ˆì—ì„œ ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•˜ê³  ì ì‘í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥</p>
                        <p>ìì‹ ê³¼ í™˜ê²½ì— ëŒ€í•œ ì´í•´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•˜ì—¬ ì£¼ì²´ì ìœ¼ë¡œ ìì‹ ì˜ ì‚¶ì„ ì„¤ê³„í•˜ê³  ì´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥</p>
                        <p>ìì‹ ì˜ ì§„ë¡œì™€ ì§ì—…ì„ ìŠ¤ìŠ¤ë¡œ ê²°ì •í•˜ê³  ì§€ì†ì ì¸ ì„±ì¥ê³¼ ì ì‘ì„ ìœ„í•´ ê³„íší•˜ê³  ì‹¤ì²œí•˜ëŠ” ëŠ¥ë ¥</p>
                    `;
                    $('#result_depart').html(temp_html)
                },
                error: function() {
                    console.error('âŒ ì—ëŸ¬');
                }
            })
        }
        // --- //
        function loadCommute() {
            let temp_html = `
                <h1>- ê²½ê¸°ëŒ€ í†µí•™ ì •ë³´ -</h1>
                <hr>
                <h3>ë“±êµ ìš´í–‰ë…¸ì„ </h3>
                <h5>- | ë¶€í‰(ë…¸ì„ ) | êµ¬ì˜¬ë‹´ì¹˜ê³¼ë³‘ì› ê±´ë„ˆí¸ ì„¸ë¸ì¼ë ˆë¸ ë¶€í‰íŒŒë¼ì›€ì ì•(ì¶œë°œì§€) | 6:30(ì¶œë°œì‹œê°„) | 3,500ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ë¶€í‰(ë…¸ì„ ) | ë¶€í‰ì§€í•˜ìƒê°€ | 10ë²ˆì¶œêµ¬ ì•(ì¶œë°œì§€) | 13:00(ì¶œë°œì‹œê°„) | 3,500ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ì£¼ì•ˆ(ë…¸ì„ ) | ì£¼ì•ˆì—­ ë‚¨ê´‘ì¥ ìš°ë¦¬ì£¼ì°¨ì¥(ì¶œë°œì§€) | 6:50(ì¶œë°œì‹œê°„) | 3,500ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ì†¡ë‚´(ë…¸ì„ ) | ì†¡ë‚´ ë‚¨ê´‘ì¥(ì¶œë°œì§€) | 6:50(ì¶œë°œì‹œê°„) | 3,500ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ê°•ì„œ(ë…¸ì„ ) | ì†¡ì •ì—­(ì¶œë°œì§€) | 6:40(ì¶œë°œì‹œê°„) | 3,000ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ì¼ì‚°(ë…¸ì„ ) | ì •ë°œì‚°ì—­[2ë²ˆì¶œêµ¬](ì¶œë°œì§€) | 6:30(ì¶œë°œì‹œê°„) | 3,000ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ì¤‘ì•™ì—­(ë…¸ì„ ) | ì¤‘ì•™ì—­[ì˜ˆìˆ ëŒ€í•™ìŠ¹ê°•ì¥ ì•](ì¶œë°œì§€) | 7:30(ì¶œë°œì‹œê°„) | 2,800ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ìƒë¡ìˆ˜ì—­(ë…¸ì„ ) | ìƒë¡ìˆ˜ì—­[ì•ˆì‚° 1ëŒ€í•™ ìŠ¹ê°•ì¥ ì•](ì¶œë°œì§€) | 7:40(ì¶œë°œì‹œê°„) | 2,800ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ì•ˆì–‘(ë…¸ì„ ) | ë²”ê³„ì‚¬ê±°ë¦¬[ì „êµ­ë‚™ì§€ìë‘ ì†Œë§ìì› ì• ë²„ìŠ¤ì •ë¥˜ì¥](ì¶œë°œì§€) | 7:35(ì¶œë°œì‹œê°„) | 2,500ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ì‹ ë„ë¦¼ì—­(ë…¸ì„ ) | ì‹ ë„ë¦¼ì—­[í…Œí¬ë…¸ë§ˆíŠ¸ê´‘ì¥ ì¶œì…êµ¬](ì¶œë°œì§€) | 7:10(ì¶œë°œì‹œê°„) | 3,000ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <hr>
                <h3>í•˜êµ ìš´í–‰ë…¸ì„ </h3>
                <h5>- | ë¶€í‰,ì†¡ë‚´(ë…¸ì„ ) | 12:00(ì¶œë°œì‹œê°„) | 3,500ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ë¶€í‰,ì†¡ë‚´(ë…¸ì„ ) | 16:30(ì¶œë°œì‹œê°„) | 3,500ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ë¶€í‰,ì†¡ë‚´(ë…¸ì„ ) | 17:10(ì¶œë°œì‹œê°„) | 3,500ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ì´ìˆ˜ì—­(ë…¸ì„ ) | 16:30(ì¶œë°œì‹œê°„) | 2,800ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ì´ìˆ˜ì—­(ë…¸ì„ ) | 17:10(ì¶œë°œì‹œê°„) | 2,800ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ì•ˆì‚°(ë…¸ì„ ) | 17:10(ì¶œë°œì‹œê°„) | 2,800ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
                <h5>- | ê°•ì„œ(ë…¸ì„ ) | 17:10(ì¶œë°œì‹œê°„) | 3,000ì›(ìŠ¹ì°¨ìš”ê¸ˆ) |</h5>
            `;
            $('#result_commute').html(temp_html)
        }
        // --- //
        $(document).ready(function () {
            let app = $("#result_award");
            app.append('<label for="entry-type">ì…í•™ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš” (ìˆ˜ì‹œ/ì •ì‹œ): </label>');
            app.append('<select id="entry-type">' +
                '<option value="">--ì„ íƒ--</option>' +
                '<option value="ìˆ˜ì‹œ">ìˆ˜ì‹œ</option>' +
                '<option value="ì •ì‹œ">ì •ì‹œ</option>' +
                '</select>');
            app.append('<div id="extra-options" style="display: none;">' +
                '<br>' +
                '<label for="grade-type">ë“±ê¸‰ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”: </label>' +
                '<select id="grade-type">' +
                '<option value="">--ì„ íƒ--</option>' +
                '<option value="A">A</option>' +
                '<option value="B">B</option>' +
                '</select>' +
                '<br><br>' +
                '<label for="subject-type">ê³„ì—´ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”: </label>' +
                '<select id="subject-type">' +
                '<option value="">--ì„ íƒ--</option>' +
                '<option value="ì¸ë¬¸ê³„, ì˜ˆì²´ëŠ¥ê³„">ì¸ë¬¸ê³„, ì˜ˆì²´ëŠ¥ê³„</option>' +
                '<option value="ìì—°ê³„">ìì—°ê³„</option>' +
                '</select>' +
                '<br><br>' +
                '<label for="average-grade">í‰ê·  ë“±ê¸‰ì„ ì…ë ¥í•˜ì„¸ìš”: </label>' +
                '<input type="text" id="average-grade" placeholder="ì˜ˆ: 1.75">' +
                '</div>');
            app.append('<br><button id="submit-btn">ì¥í•™ê¸ˆ ì°¾ê¸°</button>');
            app.append('<hr><h2>- ì¥í•™ê¸ˆ ê²°ê³¼ -</h2><div id="result"></div>');
            $('#entry-type').on('change', function () {
                if ($(this).val() !== "") {
                    $('#extra-options').show();
                } else {
                    $('#extra-options').hide();
                }
            });
            $('#submit-btn').on('click', function () {
                const entryType = $('#entry-type').val();
                const gradeType = $('#grade-type').val();
                const subjectType = $('#subject-type').val();
                const averageGrade = parseFloat($('#average-grade').val());
                let result = "";
                if (entryType === "ìˆ˜ì‹œ") {
                    if (gradeType === "A" && subjectType === "ì¸ë¬¸ê³„, ì˜ˆì²´ëŠ¥ê³„" && averageGrade <= 1.5) {
                        result = "ìˆ˜ì‹œìš°ìˆ˜ ì¥í•™ê¸ˆ(A): ìˆ˜í˜œê¸°ê°„ 2ë…„";
                    } else if (gradeType === "B" && subjectType === "ì¸ë¬¸ê³„, ì˜ˆì²´ëŠ¥ê³„" && averageGrade <= 1.75) {
                        result = "ìˆ˜ì‹œìš°ìˆ˜ ì¥í•™ê¸ˆ(B): ìˆ˜í˜œê¸°ê°„ 1ë…„";
                    } else if (gradeType === "A" && subjectType === "ìì—°ê³„" && averageGrade <= 1.75) {
                        result = "ìˆ˜ì‹œìš°ìˆ˜ ì¥í•™ê¸ˆ(A): ìˆ˜í˜œê¸°ê°„ 2ë…„";
                    } else if (gradeType === "B" && subjectType === "ìì—°ê³„" && averageGrade <= 2.0) {
                        result = "ìˆ˜ì‹œìš°ìˆ˜ ì¥í•™ê¸ˆ(B): ìˆ˜í˜œê¸°ê°„ 1ë…„";
                    } else {
                        result = "ìˆ˜ì‹œì— í•´ë‹¹í•˜ëŠ” ì¥í•™ê¸ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
                    }
                } else if (entryType === "ì •ì‹œ") {
                    if (gradeType === "A" && subjectType === "ì¸ë¬¸ê³„, ì˜ˆì²´ëŠ¥ê³„" && averageGrade <= 1.5) {
                        result = "ì •ì‹œ ì´ì¥ ì¥í•™ê¸ˆ(A): ìˆ˜í˜œê¸°ê°„ 2ë…„";
                    } else if (gradeType === "B" && subjectType === "ì¸ë¬¸ê³„, ì˜ˆì²´ëŠ¥ê³„" && averageGrade <= 1.75) {
                        result = "ì •ì‹œ ì´ì¥ ì¥í•™ê¸ˆ(B): ìˆ˜í˜œê¸°ê°„ 1ë…„";
                    } else if (gradeType === "A" && subjectType === "ìì—°ê³„" && averageGrade <= 1.75) {
                        result = "ì •ì‹œ ì´ì¥ ì¥í•™ê¸ˆ(A): ìˆ˜í˜œê¸°ê°„ 2ë…„";
                    } else if (gradeType === "B" && subjectType === "ìì—°ê³„" && averageGrade <= 2.0) {
                        result = "ì •ì‹œ ì´ì¥ ì¥í•™ê¸ˆ(B): ìˆ˜í˜œê¸°ê°„ 1ë…„";
                    } else {
                        result = "ì •ì‹œì— í•´ë‹¹í•˜ëŠ” ì¥í•™ê¸ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
                    }
                } else {
                    result = "ëª¨ë“  í•„ìˆ˜ í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.";
                }
                $('#result').html(result + '<br><br><a href="https://www.kyonggi.ac.kr/scholarship/contents.do?key=3067">- ì •í™•í•œ ì¥í•™ê¸ˆ í™•ì¸í•˜ê¸° - ê²½ê¸°ëŒ€í•™êµ ì¥í•™ì§€ì› ì‚¬ì´íŠ¸</a>');
            });
        });
        // --- //
        function loadDorm() {
            let temp_html = `
                <h1>- ê²½ê¸°ëŒ€ ê¸°ìˆ™ì‚¬ ì‹ ì²­(ê²½ê¸°ë“œë¦¼íƒ€ì›Œ) -</h1>
                <iframe src="https://dorm.kyonggi.ac.kr/" style="width: 100%; height: calc(100vh - 150px); border: none; sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
            `;
            $('#result_dorm').html(temp_html)
        }
        // --- //
        function loadCourse() {
            let temp_html = `
                <h1>- ê²½ê¸°ëŒ€ ì˜ˆë¹„ ìˆ˜ê°•ì‹ ì²­(ê²½ê¸°íƒ€ì„) - </h1>
                <iframe src="https://kyonggiti.me/" style="width: 100%; height: calc(100vh - 150px); border: none; sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
            `;
            $('#result_course').html(temp_html)
        }
        // --- //
        function loadCalendar() {
            var calendarEl = $('#result_cal')[0];
            $.ajax({
                url: '/showPlan',
                method: 'GET',
                dataType: 'json',
                success: function(data) {
                    var calendar = new FullCalendar.Calendar(calendarEl, {
                        initialView: 'dayGridMonth',
                        events: data.univ_plan.map(event => ({
                                title: event.data_text,
                                start: event.start_date,
                                end: event.end_date,
                                color: getEventColor(event.start_date)
                        })),
                        eventDisplay: 'block'
                    });
                    calendar.render();
                },
                error: function() {
                    console.error('âŒ ì—ëŸ¬');
                }
            });
            $.ajax ({
                url: '/showPlan',
                method: 'GET',
                dataType: 'json',
                success: function(response) {
                    let data = response.univ_plan;
                    let random_date1 = Math.floor((Math.random() * (10 - 0) + 1))
                    let random_date2 = Math.floor((Math.random() * (10 - 0) + 1))
                    const today = new Date();
                    const targetDate1 = new Date('2025-02-24');
                    const diffTime1 = targetDate1 - today;
                    const diffDays1 = Math.ceil(diffTime1 / (1000 * 60 * 60 * 24));
                    const targetDate2 = new Date('2025-03-04');
                    const diffTime2 = targetDate2 - today;
                    const diffDays2 = Math.ceil(diffTime2 / (1000 * 60 * 60 * 24));
                    let temp_info_html = `
                        <hr>
                        <p style="text-align: center;">ğŸ“£ <b>ì¤‘ìš”í•  ê²ƒ ê°™ì•„ìš”!</b> :
                        <br> - <span style="color: blue;">${data[random_date1].data_text}</span>
                        <br> - <span style="color: blue;">${data[random_date2].data_text}</span>
                        </p>
                        <p style="text-align: center;">ğŸ“… <b>ì¤‘ìš”í•œ ì¼ì •ì„ ì•Œë ¤ë“œë ¤ìš”!</b> :
                        <br> - <span">ì‹ ì…ìƒ ìˆ˜ê°• ì‹ ì²­ : <b style="color: red;">D-${diffDays1}</b></span>
                        <br> - <span">1í•™ê¸° ê°œê°•ì¼ : <b style="color: red;">D-${diffDays2}</b></span>
                        </p>
                    `;
                    $('#result_cal').append(temp_info_html)
                },
                error: function() {
                    console.error('âŒ ì—ëŸ¬');
                }
            })
        }
        // --- //
        function getEventColor(date) {
            const month = new Date(date).getMonth();
            const colors = [
                '#FF9999', // 1ì›” //
                '#FFB366', // 2ì›” //
                '#FFFF99', // 3ì›” //
                '#99FF99', // 4ì›” //
                '#99FFFF', // 5ì›” //
                '#9999FF', // 6ì›” //
                '#FF99FF', // 7ì›” //
                '#FF99CC', // 8ì›” //
                '#FFCC99', // 9ì›” //
                '#99CCFF', // 10ì›” //
                '#CC99FF', // 11ì›” //
                '#FF9999'  // 12ì›” //
            ];
            return colors[month];
        }
        // --- //
        function loadPlan() {
            $.ajax(
                {
                    type: "GET",
                    url: "/plan",
                    data: {},
                    success: function() {
                        console.log('âœ… ê²½ê¸°ëŒ€ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì„±ê³µ!');
                    },
                    error: function() {
                        alert('âŒ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ì§€ ëª»í•¨!');
                    }
                }
            )
        }
    </script>
</body>
</html>
